server {
    listen       80;
    server_name  _;         # wildcard

    root /usr/share/nginx/html;
    index index.html;

    # ── 1. Fallback SPA ────────────────────────────────────────────────────────
    location / {
        # If file or folder → we serving, else index.html
        try_files $uri $uri/ /index.html;
    }

    # ── 2. Static files ────────────────────────────
    location ~* \.(?:js|css|png|jpg|jpeg|gif|svg|webp|avif|ico|wasm|json)$ {
        expires 30d;
        access_log off;
        # Gzip auto activated in image by default
    }

    # ── 3. Health-check endpoint ───────────────────────────────────────────
    location = /healthz {
        add_header Content-Type text/plain;
        return 200 "ok\n";
    }
}
